// Generated by CoffeeScript 1.4.0
(function() {

  exports.XmlEntities = (function() {
    var alphaIndex;

    function XmlEntities() {}

    alphaIndex = {
      'lt': '<',
      'gt': '>',
      'quot': '"',
      'apos': '\'',
      'amp': '&'
    };

    XmlEntities.prototype.encode = function(str) {
      return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&apos;');
    };

    XmlEntities.prototype.decode = function(str) {
      return str.replace(/&(#?[\w\d]+);?/g, function(s, entity) {
        var char, code;
        if (entity.charAt(0) === "#") {
          if (entity.charAt(1) === 'x') {
            code = parseInt(entity.substr(2).toLowerCase(), 16);
          } else {
            code = parseInt(entity.substr(1));
          }
          if (isNaN(code) || code < -32768 || code > 65535) {
            char = '';
          } else {
            char = String.fromCharCode(code);
          }
        } else {
          char = alphaIndex[entity] || alphaIndex[entity.toLowerCase()];
        }
        if (char === void 0) {
          return "";
        } else {
          return char;
        }
      });
    };

    return XmlEntities;

  })();

}).call(this);
